!function(a){"use strict";a.popImageModal=function(b,c,d,e){a("#image-modal-container").modal({backdrop:!0,keyboard:!0}),a("#image-modal-container #image-modal").css({width:function(){return.5*a(document).width()+"px"}}),e||a("#model-footer-pager").hide(),a("#modal-image-holder").attr("src",b),a("#modal-image-header").text(c),a("#modal-image-caption").text(d)}}(jQuery);var ModalImageBrowser=function(){function a(){function a(){i.length>0&&($.popImageModal(i[h].src,"Image "+(h+1)+" of "+g,"",!0),f())}function b(){$("#modal-image-holder").attr("src",i[h].src),$("#modal-image-header").text("Image "+(h+1)+" of "+g)}function c(){h=(h+1)%g,b()}function d(){console.log(h,g-h-1),h=(0>h-1?g-1:h-1)%g,b()}function e(){$(document).unbind("keydown")}function f(){$(document).bind("keydown",function(a){switch(a.which||a.keyCode){case 37:d();break;case 39:c()}})}var g=0,h=0,i=[];return{init:function(b){indexInfo=new RegExp("(\\d+):(\\d+)").exec(b.id),i=$(b).parents("ul#image-gallery-container").find("img"),indexInfo&&i||console.log("Need to have an 'img' element with id in 'size:index' format."),g=indexInfo[1],h=indexInfo[2]-1,$("#image-modal-container").on("hide.bs.modal",function(){e()}),$("#model-footer-pager #modal-pager-prev").click(d),$("#model-footer-pager #modal-pager-next").click(c),a()}}}var b;return{getInstance:function(){return b||(b=a()),b}}}();